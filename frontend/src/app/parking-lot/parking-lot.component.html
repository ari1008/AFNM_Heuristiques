<div class="container">
  <h2>Parking Lot Map</h2>

  <p class="info-electric">
    ‚ö° Les rang√©es A et F sont √©quip√©es de bornes de recharge √©lectrique.
  </p>

  <div style="text-align: right;">
    <button (click)="logout()">Se d√©connecter</button>
  </div>

  <p>email: {{ userEmail }} | r√¥le: {{ role }}</p>

  <div *ngFor="let row of rows">
    <div class="row">
      <ng-container *ngFor="let col of columns">
        <ng-container *ngIf="!getSlot(row, col).occupied; else occupiedSlot">
          <ng-container *ngIf="isLoggedIn(); else loginRedirect">
            <a
              [routerLink]="['/slot', getSlot(row, col).id]"
              class="slot free"
              [class.has-plug]="isElectricRow(row)"
            >
              {{ getSlot(row, col).id }}
              <span *ngIf="isElectricRow(row)">‚ö°</span>
            </a>
          </ng-container>

          <ng-template #loginRedirect>
            <div
              class="slot free disabled"
              [class.has-plug]="isElectricRow(row)"
              (click)="redirectToLogin()"
              style="cursor: not-allowed;"
              title="Connectez-vous pour r√©server"
            >
              {{ getSlot(row, col).id }}
              <span *ngIf="isElectricRow(row)">‚ö°</span>
            </div>
          </ng-template>

        </ng-container>

        <ng-template #occupiedSlot>
          <div
            class="slot occupied"
            [class.has-plug]="isElectricRow(row)"
          >
            {{ getSlot(row, col).id }} üîí
            <span *ngIf="isElectricRow(row)">‚ö°</span>
          </div>
        </ng-template>
      </ng-container>
    </div>
  </div>
</div>
