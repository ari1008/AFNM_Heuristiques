<div class="container" xmlns="http://www.w3.org/1999/html">
  <h2>Parking Lot Map</h2>

  <p *ngIf="isLoggedIn">email: {{ userEmail }} | r√¥le: {{ role }}</p>

  <p>
    ‚ö° Borne de recharge √©lectrique
    <br>
    üîí Place indisponible pour la journ√©e en cours
  </p>

  <div style="text-align: right;" *ngIf="isLoggedIn">
    <button (click)="logout()">Se d√©connecter</button>
  </div>
  <div style="text-align: right;" *ngIf="!isLoggedIn">
    <button (click)="createAccount()">Se cr√©er un compte</button>
    <button (click)="redirectToLogin()">Se connecter</button>
  </div>

  <!-- ENTRY-->
  <div class="entry-row">
    <div class="entry-label">‚¨áÔ∏è ENTRY</div>
  </div>

  <!-- Parking grid -->
  <div *ngFor="let row of rows" class="row">
    <ng-container *ngFor="let col of columns">
      <ng-container *ngIf="!getSlot(row, col).occupied; else occupiedSlot">
        <ng-container *ngIf="isLoggedIn; else loginRedirect">
          <a
            [routerLink]="['/slot', getSlot(row, col).id]"
            class="slot free"
            [class.has-plug]="isElectricRow(row)">
            {{ getSlot(row, col).id }}
            <span *ngIf="isElectricRow(row)">‚ö°</span>
          </a>
        </ng-container>

        <ng-template #loginRedirect>
          <div
            class="slot free disabled"
            [class.has-plug]="isElectricRow(row)"
            (click)="redirectToLogin()"
            title="Connectez-vous pour r√©server">
            {{ getSlot(row, col).id }}
            <span *ngIf="isElectricRow(row)">‚ö°</span>
          </div>
        </ng-template>
      </ng-container>

      <ng-template #occupiedSlot>
        <div class="slot occupied" [class.has-plug]="isElectricRow(row)">
          {{ getSlot(row, col).id }} üîí
          <span *ngIf="isElectricRow(row)">‚ö°</span>
        </div>
      </ng-template>
    </ng-container>
  </div>

  <!-- EXIT-->
  <div class="exit-row">
    <div class="exit-label">EXIT ‚¨áÔ∏è</div>
  </div>
</div>
